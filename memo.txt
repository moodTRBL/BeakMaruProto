채팅방은 mysql, 채팅 내용은 mongo db에 저장
채팅내용에는 채팅방 아이디와 대화자들의 아이디 포함

[메시지 받기]
1. 첫 메시지는 mongo db를 사용하여 receiver가 자신인 메시지를 모두 listen
2. 이미 존재하는 채팅방은 mongo db를 사용하여 방 아
2. listen했다면 sse를 receiver에게 푸시

[메시지 보내기]
1. 첫 메시지라면 채팅방을 생성하고 그 채팅방과 연결 (첫 메시지 판단은 채팅방의 유무로 판단)
2. 첫 메시지가 아니라면 연결된 이벤트루프에서 계속 전달

채팅방 아이디를 구독하는 방식
1. 처음 메시지를 보내면 채팅방을 생성하고 해당 채팅방에 메시지 푸시
2. 자신을 대상으로 한 채팅방이 생성되면 그때부터 그 채팅방을 구독
3. 채팅방 리스트에서 대화자가 자신이 포함되어있는 채팅방을 검색

각 사용자는 아이디가 자신을 향한 데이터가 저장되는 것을 감지하고 있어야함

쪽지요청 메시지와 그냥 메시지를 구분
쪽지요청 메시지는 방을 생성하고 해당 방을 listen하도록 웹클라 클래스나 카프카를 사용하여 구현

채팅방을 나가면 리엑티브 스트림을 concel하며 연결을 끊는다
이후에 db에서 채팅방 삭제하고 대화 내용 삭제

채팅방에는 쪽지요청을 시작한 게시글의 아이디를 연관관계